---
import type { GetStaticPaths } from "astro";
import { Image } from "astro:assets";
import { getCollection } from "astro:content";

import Base from "~/layouts/base.astro";

import dev from "~/assets/dev.svg";
import github from "~/assets/github.svg";

import type { Component as ComponentType } from "~/content/config";

export const getStaticPaths: GetStaticPaths = async () => {
   const componentsCollection = await getCollection("data");

   return componentsCollection.map((componentEntry) => ({
      params: {
         componentId: componentEntry.id,
      },
      props: {
         id: componentEntry.id,
         component: componentEntry.data,
      },
   }));
};

type Props = {
   component: ComponentType;
};

const { componentId } = Astro.params;
const { component } = Astro.props;

const Component = (
   await import(`../content/components/${componentId}/index.astro`)
).default;
---

<Base styles="space-y-3">
   <h1 class="h1 text-center">{component.title}</h1>

   <div class="flex gap-2 justify-center">
      <a href={component.article}>
         <Image src={dev} alt="Dev.to" class="h-7 w-7" />
      </a>

      <a
         href={`https://github.com/T1xx1/100frontendchallenge/tree/main/src/content/components/${componentId}`}
      >
         <Image src={github} alt="Dev.to" class="h-7 w-7" />
      </a>
   </div>

   <div class="flex flex-col md:flex-row gap-5 items-start">
      <div class="w-full md:w-1/2 space-y-5">
         <h2 class="h2 text-center">Inspo</h2>

         <div>
            <Image
               src={component.inspo}
               alt="Inspo"
               inferSize={true}
               class="rounded-xl"
            />
         </div>
      </div>

      <div class="w-full md:w-1/2 space-y-5">
         <h2 class="h2 text-center">My UI</h2>

         <div
            class="h-full w-full flex flex-col gap-5 items-center justify-center"
         >
            <Component />
         </div>
      </div>
   </div>
</Base>
