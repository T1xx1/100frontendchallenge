---
import { getCollection } from "astro:content";

import Base from "~/layouts/base.astro";

const componentsCollection = await getCollection("data");
---

<Base styles="flex flex-col space-y-5">
   <div class="text-primary text-center">
      <h1 class="text-6xl md:text-7xl font-semibold">100FrontendChallenge</h1>

      <div>100 UIs one per day</div>
   </div>

   <div class="text-center">
      <a
         href="https://dev.to/bigsondev/100-free-frontend-challenges-3f0"
         class="link">Challenge's inspo</a
      >
   </div>

   <div class="space-y-5">
      <h2 class="h2 text-center">Challenges</h2>

      <div class="card px-3 py-2 m-auto w-fit flex flex-col items-center">
         <div class="font-semibold">{componentsCollection.length} / 100</div>

         <meter
            max="100"
            value={componentsCollection.length}
            class="h-10 w-[25rem]"></meter>
      </div>

      <div class="flex flex-wrap gap-5 justify-center">
         {
            componentsCollection.map(async (componentEntry) => {
               const Component = (
                  await import(
                     `../content/components/${componentEntry.id}/index.astro`
                  )
               ).default;

               return (
                  <div class="card pt-3 w-full md:w-[49%] space-y-3">
                     <h3 class="h3 text-center">
                        <a href={`./${componentEntry.id}`} class="link">
                           {componentEntry.data.title}
                        </a>
                     </h3>

                     <Component />
                  </div>
               );
            })
         }
      </div>
   </div>

   <style lang="scss">
      meter::-webkit-meter-optimum-value {
         @apply bg-accent;
      }
   </style>
</Base>
